@using Rumos_App.DTOs

<button class="device-button @(IsActive ? "active" : "inactive") @(IsSelected ? "selected" : "")"
        @onclick="HandleClick"
        aria-label="@Device.Name">

    <!-- 光のエフェクト -->
    @if (IsActive)
    {
        <div class="light-glow" style="background: radial-gradient(circle, rgba(@Device.R,@Device.G,@Device.B,0.4) 0%, transparent 70%);"></div>
        <div class="light-core" style="background: rgb(@Device.R,@Device.G,@Device.B); box-shadow: 0 0 30px rgba(@Device.R,@Device.G,@Device.B,0.8), 0 0 60px rgba(@Device.R,@Device.G,@Device.B,0.4);"></div>
    }
    else
    {
        <div class="light-core inactive-core"></div>
    }

    <!-- デバイス名 -->
    <div class="device-name-plate">
        <span class="device-name">@Device.Name</span>
        @if (IsActive)
        {
            <span class="status-indicator active-indicator"></span>
        }
    </div>

    <!-- ホバーエフェクト -->
    <div class="hover-overlay"></div>
</button>

@code {
    [Parameter]
    public DeviceDto Device { get; set; } = new();

    [Parameter]
    public EventCallback<DeviceDto> OnSelectDevice { get; set; }

    [Parameter]
    public bool IsSelected { get; set; } = false;

    private bool IsActive => Device.Brightness > 0;

    private async Task HandleClick()
    {
        await OnSelectDevice.InvokeAsync(Device);
    }
}
