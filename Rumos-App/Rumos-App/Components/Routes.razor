@using Microsoft.AspNetCore.Components.Routing

<Router AppAssembly="@typeof(MauiProgram).Assembly">
    <Found Context="routeData">
        <LayoutView Layout="@GetLayout(routeData)">
            <RouteView RouteData="@routeData" />
            <FocusOnNavigate RouteData="@routeData" Selector="h1" />
        </LayoutView>
    </Found>
    <NotFound>
        <LayoutView Layout="@typeof(RumosLayout)">
            <div class="section-frame flex-center">
                <div class="flex-col-center gap-lg">
                    <h1 class="text-2xl font-montserrat">404</h1>
                    <p class="text-md opacity-70">ページが見つかりません</p>
                </div>
            </div>
        </LayoutView>
    </NotFound>
</Router>

@code {
    [Inject]
    private NavigationManager Nav { get; set; } = default!;

    private Type? GetLayout(RouteData routeData)
    {
        var path = Nav.Uri.Replace(Nav.BaseUri, "");

        // アプリケーション内のパスではRumosLayoutを使用
        string[] appPaths = { "app" };

        if (appPaths.Any(p => path.StartsWith(p, StringComparison.OrdinalIgnoreCase)))
        {
            return typeof(RumosLayout);
        }

        // デフォルトではRumosLayoutを使用
        return typeof(RumosLayout);
    }
}
